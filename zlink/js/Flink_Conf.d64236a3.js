(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Flink_Conf"],{"22cd":function(n,l,e){"use strict";e.r(l);var t=function(){var n=this,l=n._self._c;return l("div",[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[n._v("首页")]),l("el-breadcrumb-item",[n._v("配置中心")]),l("el-breadcrumb-item",[n._v("flink 配置中心")])],1),l("el-card",[l("div",{staticClass:"flinkconf-title"},[n._v(" flink 配置 "),l("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:function(l){n.addFlinkConfDialogVis=!0,n.flinkConfFormTil="创建 flink 环境"}}},[n._v(" 创建 flink 环境 ")])],1),l("el-table",{attrs:{data:n.flinkConfList,border:"",stripe:""}},[l("el-table-column",{attrs:{label:"编号",type:"index"}}),l("el-table-column",{attrs:{label:"集群名字",prop:"name"}}),l("el-table-column",{attrs:{label:"flink 集群模式",prop:"model"}}),l("el-table-column",{attrs:{label:"ip",prop:"ip"}}),l("el-table-column",{attrs:{label:"port",prop:"port"}}),l("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:n._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(l){n.getFlinkConfById(e.row.id),n.flinkConfFormTil="编辑 flink 环境"}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(l){return n.delFlinkConf(e.row.id)}}})]}}])})],1)],1),l("el-dialog",{attrs:{title:n.flinkConfFormTil,visible:n.addFlinkConfDialogVis,width:"50%"},on:{"update:visible":function(l){n.addFlinkConfDialogVis=l},close:n.addFlinkConfDialogClosed}},[l("el-form",{ref:"addFlinkConfFormRef",attrs:{model:n.addFlinkConfForm,"label-width":"140px"}},[l("el-form-item",{attrs:{label:"集群名字"}},[l("el-input",{model:{value:n.addFlinkConfForm.name,callback:function(l){n.$set(n.addFlinkConfForm,"name",l)},expression:"addFlinkConfForm.name"}})],1),l("el-form-item",{attrs:{label:"flink 模式："}},[l("el-select",{attrs:{placeholder:"请选择"},on:{change:n.selectBtn},model:{value:n.addFlinkConfForm.model,callback:function(l){n.$set(n.addFlinkConfForm,"model",l)},expression:"addFlinkConfForm.model"}},n._l(n.flinkModel,(function(n){return l("el-option",{key:n.flinkModel,attrs:{label:n.flinkModel,value:n.flinkModel}})})),1)],1),l("div",["standalone"==n.addFlinkConfForm.model?l("div",[l("el-form-item",{attrs:{label:"ip："}},[l("el-input",{model:{value:n.addFlinkConfForm.ip,callback:function(l){n.$set(n.addFlinkConfForm,"ip",l)},expression:"addFlinkConfForm.ip"}})],1),l("el-form-item",{attrs:{label:"port："}},[l("el-input",{model:{value:n.addFlinkConfForm.port,callback:function(l){n.$set(n.addFlinkConfForm,"port",l)},expression:"addFlinkConfForm.port"}})],1)],1):"yarn"==n.addFlinkConfForm.model?l("div",[l("el-form-item",{attrs:{label:"yarn 网址："}},[l("el-input",{model:{value:n.addFlinkConfForm.yarnUrl,callback:function(l){n.$set(n.addFlinkConfForm,"yarnUrl",l)},expression:"addFlinkConfForm.yarnUrl"}})],1)],1):n._e()]),l("el-form-item",{attrs:{label:"FLINK_HOME 路径"}},[l("el-input",{model:{value:n.addFlinkConfForm.flinkHome,callback:function(l){n.$set(n.addFlinkConfForm,"flinkHome",l)},expression:"addFlinkConfForm.flinkHome"}})],1),l("el-form-item",{attrs:{label:"core_site 路径"}},[l("el-input",{model:{value:n.addFlinkConfForm.coreSite,callback:function(l){n.$set(n.addFlinkConfForm,"coreSite",l)},expression:"addFlinkConfForm.coreSite"}})],1),l("el-form-item",{attrs:{label:"hdfs_site 路径"}},[l("el-input",{model:{value:n.addFlinkConfForm.hdfsSite,callback:function(l){n.$set(n.addFlinkConfForm,"hdfsSite",l)},expression:"addFlinkConfForm.hdfsSite"}})],1),l("el-form-item",{attrs:{label:"yarn_site 路径"}},[l("el-input",{model:{value:n.addFlinkConfForm.yarnSite,callback:function(l){n.$set(n.addFlinkConfForm,"yarnSite",l)},expression:"addFlinkConfForm.yarnSite"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(l){n.addFlinkConfDialogVis=!1}}},[n._v("取 消")]),l("el-button",{attrs:{type:"success"},on:{click:n.testIp}},[n._v("测试连接")]),l("el-button",{attrs:{type:"primary"},on:{click:n.addFlinkConf}},[n._v("保 存")])],1)],1)],1)},o=[],i={name:"FlinkConf",data(){return{queryInfo:{pageNo:1,pageSize:20},flinkConfList:[],total:0,addFlinkConfForm:{model:"",ip:"",port:"",yarnUrl:"",flinkHome:"",coreSite:"",hdfsSite:"",yarnSite:""},flinkModel:[],flinkConf:[],addFlinkConfDialogVis:!1,flinkConfFormTil:"创建 flink 环境"}},created(){this.listFlinkModel(),this.pageFlinkConf()},methods:{async getFlinkConfById(n){const{data:l}=await this.$http.get("flinkconf/pageFlinkConf",{params:{id:n}});if(200!==l.code)return this.$message.error("获取数据失败!");l.data.records.length>0&&(this.addFlinkConfForm=l.data.records[0],this.addFlinkConfDialogVis=!0)},async delFlinkConf(n){const{data:l}=await this.$http.post("flinkconf/delFlinkConf",{id:n});if(!0!==l.data)return this.$message.error("删除数据源失败！");this.$message.success("删除数据源成功！"),await this.pageFlinkConf()},async pageFlinkConf(){const{data:n}=await this.$http.get("flinkconf/pageFlinkConf",{params:this.queryInfo});if(200!==n.code)return this.$message.error("获取数据源列表失败！");this.flinkConfList=n.data.records,this.total=n.data.total},async addFlinkConf(){const{data:n}=await this.$http.post("flinkconf/addFlinkConf",this.addFlinkConfForm);if(200!==n.code)return this.$message.error("保存 flink 配置失败！");this.testIp().then(n=>{!0===n&&(this.addFlinkConfDialogVis=!1)}),this.pageFlinkConf(),this.$message.success("保存 flink 配置成功！"),this.addFlinkConfDialogVis=!1},addFlinkConfDialogClosed(){},selectBtn(n){this.flinkModel.forEach(l=>{l.flinkModel===n&&(this.addFlinkConfForm.model=n)})},async listFlinkModel(){const{data:n}=await this.$http.get("flink-model/listFlinkModel");if(200!==n.code)return this.$message.error("获取 flink model 失败！");this.$message.success("获取 flink model 成功！"),this.flinkModel=n.data},async testIp(){if("standalone"===this.addFlinkConfForm.model){const{data:n}=await this.$http.post("flinkconf/testIp",this.addFlinkConfForm);return!0!==n.data?(this.$message.error("数据源测试连接失败！"),!1):(this.$message.success("数据源测试连接成功！"),!0)}}}},a=i,s=(e("6054"),e("2877")),r=Object(s["a"])(a,t,o,!1,null,"0612d9ba",null);l["default"]=r.exports},6054:function(n,l,e){"use strict";e("e92f")},e92f:function(n,l,e){}}]);
//# sourceMappingURL=Flink_Conf.d64236a3.js.map