{"version":3,"sources":["webpack:///./src/components/flinktask/FlinkTask.vue?a13f","webpack:///./src/components/flinktask/FlinkTask.vue","webpack:///src/components/flinktask/FlinkTask.vue","webpack:///./src/components/flinktask/FlinkTask.vue?0618","webpack:///./src/components/flinktask/FlinkTask.vue?9498"],"names":["render","_vm","this","_c","_self","attrs","path","_v","staticClass","on","getLocalFlinkInfo","stopFlinkTask","slot","_s","pushModel","toString","$event","pushTaskVisible","ref","flinkInfos","handleSelectionChange","scopedSlots","_u","key","fn","scope","row","model","url","status","pushTaskClosed","pushTaskForm","selectBtn","value","clusterId","callback","$$v","$set","expression","_l","flinkConfList","item","name","id","parallelism","flinkProps","i","k","v","addFlinkProps","subFlinkProps","_e","pushTask","staticRenderFns","components","watch","data","queryInfo","pageNo","pageSize","flinkModel","jobIds","props","multipleSelection","created","methods","params","component"],"mappings":"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","file":"js/FlinkTask.c0140394.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlinkTask.vue?vue&type=style&index=0&id=59658ccc&prod&lang=less&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"flink-task\")]),_c('el-breadcrumb-item',[_vm._v(\"flink-task\")])],1),_c('el-card',[_c('el-row',[_vm._v(\" flink-task 信息 \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"刷新 flink-task 信息\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"success\",\"plain\":\"\",\"icon\":\"el-icon-refresh\",\"circle\":\"\"},on:{\"click\":_vm.getLocalFlinkInfo}})],1),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"停止任务\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-close\",\"circle\":\"\"},on:{\"click\":_vm.stopFlinkTask}})],1),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"placement\":\"top\"}},[_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_vm._v(\"推送任务\"),_c('br'),_vm._v(\"目前支持 \"+_vm._s(_vm.pushModel.toString()))]),_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-s-promotion\",\"circle\":\"\"},on:{\"click\":function($event){_vm.pushTaskVisible=true}}})],1)],1),_c('el-table',{ref:\"multipleTable\",attrs:{\"data\":_vm.flinkInfos,\"border\":\"\",\"stripe\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"label\":\"jobId\",\"prop\":\"jobId\"}}),_c('el-table-column',{attrs:{\"label\":\"模式\",\"prop\":\"model\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"local 模式下并行度为1\",\"disabled\":scope.row.model !== 'local',\"placement\":\"top\"}},[(scope.row.model === 'local')?_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(_vm._s(scope.row.model))]):_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(_vm._s(scope.row.model))])],1)]}}])},[_c('template',{slot:\"header\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"目前支持 local, standalone, yarn, k8s\",\"placement\":\"top\"}},[_c('span',[_vm._v(\" 模式 \"),_c('i',{staticClass:\"el-icon-question\"})])])],1)],2),_c('el-table-column',{attrs:{\"label\":\"url\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{attrs:{\"href\":'http://'+scope.row.url+'/#/overview',\"target\":\"_blank\"}},[_vm._v(\"flink-web\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"任务状态\",\"prop\":\"status\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status === 'RUNNING')?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(_vm._s(scope.row.status))]):_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(_vm._s(scope.row.status))])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"推送任务\",\"visible\":_vm.pushTaskVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.pushTaskVisible=$event},\"close\":_vm.pushTaskClosed}},[_c('el-form',{ref:\"pushTaskFormRef\",attrs:{\"model\":_vm.pushTaskForm,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"推送集群：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.selectBtn},model:{value:(_vm.pushTaskForm.clusterId),callback:function ($$v) {_vm.$set(_vm.pushTaskForm, \"clusterId\", $$v)},expression:\"pushTaskForm.clusterId\"}},_vm._l((_vm.flinkConfList),function(item){return _c('el-option',{key:item.name,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"并行度：\"}},[_c('el-input',{model:{value:(_vm.pushTaskForm.parallelism),callback:function ($$v) {_vm.$set(_vm.pushTaskForm, \"parallelism\", $$v)},expression:\"pushTaskForm.parallelism\"}})],1),_vm._l((_vm.flinkProps),function(item,i){return _c('div',{key:i},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-form-item',{attrs:{\"label\":\"flink 配置参数:\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"key\"},model:{value:(item.k),callback:function ($$v) {_vm.$set(item, \"k\", $$v)},expression:\"item.k\"}})],1)],1),_c('el-col',{attrs:{\"span\":10}},[_c('el-form-item',{attrs:{\"prop\":\"age\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"value\"},model:{value:(item.v),callback:function ($$v) {_vm.$set(item, \"v\", $$v)},expression:\"item.v\"}})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"circle\":\"\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addFlinkProps}}),(i>0)?_c('el-button',{attrs:{\"circle\":\"\",\"icon\":\"el-icon-minus\"},on:{\"click\":_vm.subFlinkProps}}):_vm._e()],1)],1)],1)})],2),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.pushTaskVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.pushTask}},[_vm._v(\"推 送\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区域-->\r\n    <el-breadcrumb separator-class='el-icon-arrow-right'>\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>flink-task</el-breadcrumb-item>\r\n      <el-breadcrumb-item>flink-task</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <el-card>\r\n      <el-row>\r\n        flink-task 信息\r\n\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          content=\"刷新 flink-task 信息\"\r\n          placement=\"top\">\r\n          <el-button type=\"success\" plain icon=\"el-icon-refresh\" circle @click='getLocalFlinkInfo'></el-button>\r\n        </el-tooltip>\r\n\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          content=\"停止任务\"\r\n          placement=\"top\">\r\n          <el-button type=\"danger\" icon=\"el-icon-close\" circle @click=\"stopFlinkTask\"></el-button>\r\n        </el-tooltip>\r\n\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          placement=\"top\">\r\n          <div slot=\"content\">推送任务<br/>目前支持 {{ pushModel.toString() }}</div>\r\n          <el-button type=\"success\" icon=\"el-icon-s-promotion\" circle @click=\"pushTaskVisible=true\"></el-button>\r\n        </el-tooltip>\r\n\r\n      </el-row>\r\n\r\n      <el-table ref=\"multipleTable\" :data='flinkInfos' border stripe @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <el-table-column label='jobId' prop='jobId'></el-table-column>\r\n        <el-table-column label='模式' prop='model'>\r\n          <template slot=\"header\">\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"目前支持 local, standalone, yarn, k8s\"\r\n              placement=\"top\">\r\n              <span> 模式 <i class=\"el-icon-question\"></i>  </span>\r\n            </el-tooltip>\r\n          </template>\r\n          <template slot-scope=\"scope\">\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"local 模式下并行度为1\"\r\n              :disabled=\"scope.row.model !== 'local'\"\r\n              placement=\"top\">\r\n              <el-tag type=\"danger\" v-if=\"scope.row.model === 'local'\">{{ scope.row.model }}</el-tag>\r\n              <el-tag type=\"success\" v-else>{{ scope.row.model }}</el-tag>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label='url'>\r\n          <template slot-scope=\"scope\">\r\n            <a :href=\"'http://'+scope.row.url+'/#/overview'\" target=\"_blank\">flink-web</a>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label='任务状态' prop='status'>\r\n          <template slot-scope=\"scope\">\r\n            <el-tag type=\"success\" v-if=\"scope.row.status === 'RUNNING'\">{{ scope.row.status }}</el-tag>\r\n            <el-tag type=\"danger\" v-else>{{ scope.row.status }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <el-dialog title='推送任务' :visible.sync=\"pushTaskVisible\" width=\"50%\"\r\n               @close=\"pushTaskClosed\">\r\n      <!-- 添加数据源表单 -->\r\n      <el-form :model=\"pushTaskForm\" ref=\"pushTaskFormRef\"\r\n               label-width=\"140px\">\r\n        <el-form-item label=\"推送集群：\">\r\n          <el-select v-model=\"pushTaskForm.clusterId\" placeholder=\"请选择\" @change=\"selectBtn\">\r\n            <el-option\r\n              v-for=\"item in flinkConfList\"\r\n              :key=\"item.name\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"并行度：\">\r\n          <el-input v-model=\"pushTaskForm.parallelism\"></el-input>\r\n        </el-form-item>\r\n        <div v-for=\"(item, i) in flinkProps\" :key=\"i\">\r\n          <el-row :gutter=\"24\">\r\n            <el-col :span=\"10\">\r\n              <el-form-item label=\"flink 配置参数:\" prop=\"name\">\r\n                <el-input v-model=\"item.k\" clearable placeholder=\"key\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"10\">\r\n              <el-form-item prop=\"age\">\r\n                <el-input v-model=\"item.v\" clearable placeholder=\"value\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"4\">\r\n              <el-button circle icon=\"el-icon-plus\" @click=\"addFlinkProps\"></el-button>\r\n              <el-button circle icon=\"el-icon-minus\" @click=\"subFlinkProps\" v-if=\"i>0\"></el-button>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"pushTaskVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"pushTask\">推 送</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'FlinkTask',\r\n  components: {},\r\n  watch: {},\r\n  data() {\r\n    return {\r\n      queryInfo: {\r\n        // 当前的页\r\n        pageNo: 1,\r\n        // 当前每页显示多少条数据\r\n        pageSize: 100\r\n      },\r\n      flinkConfList: [],\r\n      flinkModel: [],\r\n      pushModel: [],\r\n      flinkProps: {},\r\n      pushTaskForm: {\r\n        clusterId: '',\r\n        parallelism: 1,\r\n        jobIds: [],\r\n        props: {},\r\n      },\r\n      pushTaskVisible: false,\r\n      multipleSelection: [],\r\n      flinkInfos: [],\r\n    }\r\n  },\r\n  // 刚进入界面首先调用这里的函数\r\n  created() {\r\n    this.listFlinkModel()\r\n    this.getLocalFlinkInfo()\r\n    this.pageFlinkConf()\r\n  },\r\n  methods: {\r\n    async pageFlinkConf() {\r\n      const {data: res} = await this.$http.get('flinkconf/pageFlinkConf', {params: this.queryInfo})\r\n      if (res.code !== 200) return this.$message.error('获取数据源列表失败！')\r\n      this.flinkConfList = res.data.records\r\n      console.log(this.flinkConfList)\r\n    },\r\n    async listFlinkModel() {\r\n      const {data: res} = await this.$http.get('flink-model/listFlinkModel')\r\n      if (res.code !== 200) return this.$message.error(\"获取 flink model 失败！\")\r\n      this.$message.success(\"获取 flink model 成功！\")\r\n      this.flinkModel = res.data\r\n      console.log(this.flinkModel)\r\n      this.flinkModel.map(it => {\r\n        this.pushModel.push(it.flinkModel)\r\n      })\r\n    },\r\n    async pushTask() {\r\n      this.multipleSelection.map(it => {\r\n        this.pushTaskForm.jobIds.push(it.jobId)\r\n      })\r\n      if (this.multipleSelection.length === 0) return this.$message.error(\"请勾选任务！\")\r\n      if (this.pushTaskForm.clusterId === '') return this.$message.error(\"请选择推送集群！\")\r\n      this.pushTaskForm.props = this.flinkProps\r\n      console.log(this.pushTaskForm)\r\n      const {data: res} = await this.$http.post('cdc/pushTask', this.pushTaskForm)\r\n      this.pushTaskForm.jobIds = []\r\n      this.pushTaskVisible = false\r\n    },\r\n    pushTaskClosed() {\r\n\r\n    },\r\n    selectBtn(value) {\r\n      this.pushModel.forEach(item => {\r\n        if (item === value) this.pushTaskForm.model = item\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    async stopFlinkTask() {\r\n      if (this.multipleSelection.length === 0) return this.$message.error(\"请勾选任务！\")\r\n      const {data: res} = await this.$http.post('cdc/stopFlinkTask', this.multipleSelection)\r\n      if (res.code !== 200) return this.$message.error(\"停止任务失败！\")\r\n      this.$message.success(\"停止任务成功！\")\r\n      await this.getLocalFlinkInfo();\r\n    },\r\n    async getLocalFlinkInfo() {\r\n      const {data: res} = await this.$http.get('cdc/getLocalFlinkInfo')\r\n      console.log(res)\r\n      if (res.code !== 200) return this.$message.error(\"获取 flink info 失败！\")\r\n      this.$message.success(\"获取 flink info 成功！\")\r\n      this.flinkInfos = res.data\r\n      console.log(this.flinkInfos)\r\n    },\r\n    addFlinkProps() {\r\n      this.flinkProps.push({k: '', v: ''})\r\n    },\r\n    subFlinkProps(index) {\r\n      this.flinkProps.splice(index, 1)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<!--scoped 只在当前组件中生效，去掉在全局生效。一个组件中的样式不应该影响其他地方-->\r\n<style lang='less' scoped>\r\n.flink-props {\r\n  width: 200px;\r\n  border: 1px solid red;\r\n  display: inline-block;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlinkTask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlinkTask.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FlinkTask.vue?vue&type=template&id=59658ccc&scoped=true&\"\nimport script from \"./FlinkTask.vue?vue&type=script&lang=js&\"\nexport * from \"./FlinkTask.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FlinkTask.vue?vue&type=style&index=0&id=59658ccc&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59658ccc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}